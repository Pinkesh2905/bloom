{% extends 'base.html' %}

{% block content %}
<div class="flex items-center justify-center min-h-[calc(100vh-20rem)]">
  <div class="w-full max-w-md p-8 space-y-8 glass-strong rounded-3xl shadow-2xl animate-bounce-in">
    
    <!-- Header Section -->
    <div class="text-center">
      <div class="inline-block">
        <div class="w-20 h-20 bg-neon-gradient rounded-2xl flex items-center justify-center shadow-xl mx-auto mb-4">
          <i class="fas fa-sign-in-alt text-white text-3xl"></i>
        </div>
      </div>
      <h2 class="text-4xl font-fredoka font-bold bg-gradient-to-r from-blue-600 via-purple-500 to-pink-500 bg-clip-text text-transparent">
        Welcome Back!
      </h2>
      <p class="text-gray-500 font-dm mt-2">Sign in to continue your journey.</p>
    </div>

    <!-- Django Form Errors -->
    {% if form.non_field_errors %}
      <div class="bg-red-100 border-l-4 border-red-500 text-red-700 p-4 rounded-xl" role="alert">
        {% for error in form.non_field_errors %}
          <p class="font-bold">Oops!</p>
          <p>{{ error }}</p>
        {% endfor %}
      </div>
    {% endif %}

    <!-- Login Form -->
    <form method="POST" class="space-y-6">
      {% csrf_token %}
      
      {% for field in form %}
      <div class="relative">
        <label for="{{ field.id_for_label }}" class="absolute -top-2 left-4 inline-block bg-white/80 backdrop-blur-xs px-1 text-sm font-medium text-gray-600 font-dm">{{ field.label }}</label>
        
        {% if field.name == "username" %}
          <input 
            type="text" 
            name="{{ field.name }}" 
            id="{{ field.id_for_label }}"
            value="{{ field.value|default:'' }}" 
            placeholder="e.g., bloomuser" 
            class="block w-full px-5 py-4 mt-2 text-gray-700 bg-white/50 border border-gray-200 rounded-2xl focus:border-purple-400 focus:ring-purple-300 focus:ring-opacity-40 focus:outline-none focus:ring transition-all duration-300 font-dm"
            autofocus 
            required>
        {% elif field.name == "password" %}
          <input 
            type="password" 
            name="{{ field.name }}" 
            id="password-input"
            placeholder="••••••••" 
            class="block w-full px-5 py-4 mt-2 text-gray-700 bg-white/50 border border-gray-200 rounded-2xl focus:border-purple-400 focus:ring-purple-300 focus:ring-opacity-40 focus:outline-none focus:ring transition-all duration-300 font-dm"
            required>
        {% else %}
          {{ field }}
        {% endif %}
        
        {% if field.errors %}
          <div class="text-red-500 text-sm mt-2 font-dm">
            {% for error in field.errors %}
              <span>{{ error }}</span>
            {% endfor %}
          </div>
        {% endif %}
      </div>
      {% endfor %}

      <div class="flex items-center justify-between">
        <div class="flex items-center">
          <input type="checkbox" id="togglePassword" class="h-4 w-4 text-purple-600 focus:ring-purple-500 border-gray-300 rounded cursor-pointer">
          <label for="togglePassword" class="ml-2 block text-sm text-gray-700 font-dm cursor-pointer">Show Password</label>
        </div>
        <a href="#" class="text-sm text-purple-600 hover:underline font-dm font-semibold">Forgot password?</a>
      </div>
      
      <div>
        <button type="submit" class="btn-modern w-full px-6 py-4 text-lg bg-gradient-to-r from-blue-500 to-purple-500 text-white font-semibold rounded-2xl hover:from-blue-600 hover:to-purple-600 shadow-lg font-dm focus-ring">
          <i class="fas fa-sign-in-alt mr-2"></i>Login
        </button>
      </div>
    </form>

    <p class="text-center text-gray-600 font-dm">
      Don’t have an account? 
      <a href="{% url 'signup' %}" class="font-semibold text-purple-600 hover:text-purple-800 transition-colors duration-300">Sign up here</a>
    </p>
  </div>
</div>

<script>
  document.getElementById("togglePassword").addEventListener("change", function () {
    const passwordInput = document.getElementById("password-input");
    passwordInput.type = this.checked ? "text" : "password";
  });
</script>
{% endblock %}
